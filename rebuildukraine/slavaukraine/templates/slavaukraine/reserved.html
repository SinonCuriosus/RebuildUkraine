{% extends "slavaukraine/template.html" %}
{% load static %}
{% block main %}

<!-- Enterprise reserved area-->

{% if user.is_enterprise %}
    <div>
        <section class="position-relative py-4 py-xl-5">
            <div class="mb-5">
                <div class="col-md-8 col-xl-6 text-center mx-auto">
                    <p class="w-lg-50"></p>
                </div>
            </div>
            <div class="container position-relative reserved-page-card">

                <div class="row d-flex justify-content-center reserved-page-card">

                    <div class="col-md-12 col-lg-12 col-xl-12">
                        <ul class="nav nav-pills mb-4 reserved-page-buttons" id="pills-tab" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="pills-home-tab" data-bs-toggle="pill"
                                        data-bs-target="#pills-home" type="button" role="tab"
                                        aria-controls="pills-home"
                                        aria-selected="true">O meu Perfil
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="pills-profile-tab" data-bs-toggle="pill"
                                        data-bs-target="#pills-profile" type="button" role="tab"
                                        aria-controls="pills-profile" aria-selected="false">Propostas criadas
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="pills-contact-tab" data-bs-toggle="pill"
                                        data-bs-target="#pills-contact" type="button" role="tab"
                                        aria-controls="pills-contact" aria-selected="false">Projetos Guardados
                                </button>
                            </li>
                        </ul>
                        <div class="tab-content reserved-page-information" id="pills-tabContent">
                            <div class="tab-pane fade show active reserved-page-information" id="pills-home"
                                 role="tabpanel"
                                 aria-labelledby="pills-home-tab">
                                <p>{{ user.profile_image }}</p>
                                {% if user.first_name %}
                                    <p>Nome: {{ user.first_name }} {{ user.profile_image }}</p>
                                {% endif %}
                                <p>Email: {{ user.email }}</p>
                                <p>Número de contribuinte: {{ user.taxnumber }}</p>
                                <p>Morada: {{ user.address }}</p>
                                <p>Date joined: {{ user.date_joined }}</p>
                                <a href="{% url 'slavaukraine:enterprise' user.pk %}" class="btn btn-link">Editar os
                                    meus dados</a>
                            </div>

                            <div class="tab-pane fade reserved-page-information" id="pills-profile" role="tabpanel"
                                 aria-labelledby="pills-profile-tab" >
                                <hr >
                                <form action="?" method="GET" style="margin-left:auto;margin-right:auto;" >
                                    <input type="text" name="nome_do_titulo" id="pills-profile"
                                           value="{{ request.GET.nome_do_titulo }}" autocomplete="off"
                                           placeholder="Nome do título">

                                    <button type="submit" class="btn btn-group-sm">Pesquisar</button>

                                    <a href="{% url 'slavaukraine:list_enterpriseproposals' user.pk %}"
                                       class="btn btn-group-sm" >Limpar</a>

                                    <a href="{% url 'slavaukraine:registproposal' %}"
                                        class="btn btn-group-sm" style="margin-left:auto;margin-right:auto;">Registar nova vaga</a>

                                </form>

                                <hr>

                                <div class="table-responsive" >
                                    <table class="table-striped" >
                                        <tr>
                                            <th>Cidade</th>
                                            <th>Título</th>
                                            <th>Especialidade</th>
                                            <th>Opções</th>
                                        </tr>

                                        {% for object in object_list %}
                                            <tr class="text-start">
                                                <td>{{ object.city }}</td>
                                                <td>{{ object.title }}</td>
                                                <td>{{ object.expertiseNeeded }}</td>
                                                <td>

                                                    <a href="{% url 'slavaukraine:edit_proposal' object.pk %}" title="edit_proposal">Editar</a>
                                                    <a href="#" title="Excluir">Ver inscritos</a>
                                                    <a href="{% url 'slavaukraine:delete_proposal' object.pk %}" title="delete_proposal">Apagar</a>
                                                </td>

                                            </tr>
                                            <br>
                                        {% empty %}
                                            <tr>
                                                <!-- Colspan porque a mensagem vai ocupar as 3 colunas-->
                                                <td colspan="3"> Nenhuma proposta registada.</td>
                                            </tr>
                                        {% endfor %}
                                    </table>
                                    <div class="text-center">
                                        {% if page_obj.has_previous %}
                                            <a href="?page={{ page_obj.previous_page_number }}">Anterior</a>
                                        {% endif %}

                                        <span class="volunteer-subtext-blue">Página {{ page_obj.number }}</span>

                                        {% if page_obj.has_next %}
                                            <a href="?page={{ page_obj.next_page_number }}">Próxima</a>
                                        {% endif %}
                                    </div>

                                </div>

                            </div>
                            <div class="tab-pane fade reserved-page-information" id="pills-contact" role="tabpanel"
                                 aria-labelledby="pills-contact-tab">Aqui projetos guardados
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mb-5">
                <div class="col-md-8 col-xl-6 text-center mx-auto">
                    <p class="w-lg-50"></p>
                </div>
            </div>
        </section>
    </div>
{% endif %}

<!-- Person reserved area-->

{% if user.is_person %}
    <div>
        <section class="position-relative py-4 py-xl-5">
            <div class="mb-5">
                <div class="col-md-8 col-xl-6 text-center mx-auto">
                    <p class="w-lg-50"></p>
                </div>
            </div>
            <div class="container position-relative reserved-page-card">

                <div class="row d-flex justify-content-center reserved-page-card">

                    <div class="col-md-12 col-lg-12 col-xl-12">
                        <ul class="nav nav-pills mb-4 reserved-page-buttons" id="pills-tab" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="pills-home-tab" data-bs-toggle="pill"
                                        data-bs-target="#pills-home" type="button" role="tab" aria-controls="pills-home"
                                        aria-selected="true">O meu Perfil
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="pills-profile-tab" data-bs-toggle="pill"
                                        data-bs-target="#pills-profile" type="button" role="tab"
                                        aria-controls="pills-profile" aria-selected="false">Projetos Inscritos
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="pills-contact-tab" data-bs-toggle="pill"
                                        data-bs-target="#pills-contact" type="button" role="tab"
                                        aria-controls="pills-contact" aria-selected="false">Projetos Guardados
                                </button>
                            </li>
                        </ul>
                        <div class="tab-content reserved-page-information" id="pills-tabContent">
                            <div class="tab-pane fade show active reserved-page-information" id="pills-home"
                                 role="tabpanel"
                                 aria-labelledby="pills-home-tab">
                                <p>{{ user.profile_image }}</p>
                                {% if user.first_name %}
                                    <p>Nome: {{ user.first_name }} {{ user.profile_image }}</p>
                                {% endif %}
                                <p>Email: {{ user.email }}</p>
                                <p>Número de contribuinte: {{ user.taxnumber }}</p>
                                <p>Morada: {{ user.address }}</p>
                                <p>Data de nascimento: {{ user.birth }}</p>
                                <p>Date joined: {{ user.date_joined }}</p>
                                <a href="{% url 'slavaukraine:enterprise' user.pk %}" >Editar os meus dados</a>
                            </div>
                            <div class="tab-pane fade reserved-page-information" id="pills-profile" role="tabpanel"
                                 aria-labelledby="pills-profile-tab">

                                {% for data in dataset %}
                                    <tr>
                                        <td> {{ data.title }}</td>
                                        <td> {{ data.description }}</td>
                                    </tr>
                                {% endfor %}
                            </div>
                            <div class="tab-pane fade reserved-page-information" id="pills-contact" role="tabpanel"
                                 aria-labelledby="pills-contact-tab">Aqui projetos guardados
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mb-5">
                <div class="col-md-8 col-xl-6 text-center mx-auto">
                    <p class="w-lg-50"></p>
                </div>
            </div>
        </section>
    </div>
{% endif %}
{% endblock %}